<!doctype html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Mike Hartington&#39;s blog</title>
        <meta name="author">
        <meta name="description" content="The ramblings of a New Englander">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="generator" content="Hugo 0.15" />
          <link href="https://mhartington.io/post/index.xml" rel="alternate" type="application/rss+xml" title="Mike Hartington&#39;s blog" />
          <link href="https://mhartington.io/post/index.xml" rel="feed" type="application/rss+xml" title="Mike Hartington&#39;s blog" />
        <link href='//fonts.googleapis.com/css?family=Roboto:400,300,700|Noto+Serif:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://mhartington.io/css/styles.css">
        <link rel="icon" href="https://mhartington.io/favicon.ico">
        <link rel="apple-touch-icon" href="https://mhartington.io/apple-touch-icon.png" />
        <link rel="stylesheet" href="https://mhartington.io/css/highlightjs/monokai.css">
        <script src="https://mhartington.io/js/vendor/modernizr-2.8.0.min.js"></script>
        <style>
        .site-header h2 .logo {
        background: url(https://mhartington.io/img/desk.jpg) no-repeat 0 0;
        }
        @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
          .site-header h2 .logo {
            background-image: url(https://mhartington.io/img/desk.jpg);
        }}
       .site-header {
         background: #2a373d url(https://mhartington.io/img/desk.jpg) no-repeat center center;
         z-index: -1;
        }
        </style>
    </head>
    <body>
        
        <header class="site-header">
          <div class="transparent-layer">
              <h2>Mike&#39;s Blog</h2>
          </div>
        </header>


<div class="container clearfix">
    <main role="main" class="content">
        <article class="post">
            
<h1><a href="https://mhartington.io/post/automated-hugo-builds/" title="Automated Hugo Builds">Automated Hugo Builds</a></h1>

<footer class="post-info"> <span class="post-meta">
<time datetime="2016.01.04">2016.01.04</time>

</span>
</footer>

            

<p>This is a static site built using <a href="https://gohugo.io">Hugo</a>. It&rsquo;s similar to Jekyll in a few ways, but written in Go, so it&rsquo;s super fast. Plus it&rsquo;s not ruby so thats always a plus. Hugo is pretty simple to setup, especially on OSX. You can just <code>brew install</code> it.</p>

<pre><code class="language-bash">brew install hugo

# create a new site
hugo new site mySite
</code></pre>

<p>You can also run this on Linux or Windows, so another plus over Jekyll.</p>

<p>Posts are written in Markdown or HTML, what ever you prefer with some frontmatter that feels very familiar to Jekyll, so you should feel right at home.</p>

<p>A big selling point was that automated builds were dead simple to setup. They even have a section in their docs about setting it up for Github pages. Though, for their example, it assumes you&rsquo;re using this for a projects gh-pages branch, and not a <code>user.github.io</code> site. While the process is similar, it does have some important differences that you need to watch out for. Nothing against Hugo, but some thing that they could have made a bit clearer.</p>

<h2 id="enabling-builds:7818264fcd3e1b87043e534129824e35">Enabling builds</h2>

<p>So first I&rsquo;m going to assume you&rsquo;ve dug into Hugo a bit and maybe built a simple site with a page or two. So let&rsquo;s push this to github!</p>

<p><a href="/img/blog-repo.png"><img src="/img/blog-repo.png" alt="blog-repo" /></a></p>

<p>One thing you may notice is that I&rsquo;ve pushed this to a dev branch, and then made that the default branch for the repo. This is where the Hugo docs differ. Since this is a <code>user.github.io</code> site, we&rsquo;ll need to deploy the final output to master.</p>

<h2 id="building-on-push:7818264fcd3e1b87043e534129824e35">Building on Push</h2>

<p>Now that we have our code somewhere, we can use a automated build service to handle pushing the updates for us. For this we&rsquo;ll use <a href="http://wercker.com">Wercker</a>. Now this is similar to Travis or CircleCI, but it has a bunch of pre-built processors that you can use to make setup even easier.</p>

<p>Sign up for Wercker (don&rsquo;t worry, it&rsquo;s free) and create a new app from a github repo</p>

<p><a href="https://gohugo.io/img/tutorials/wercker-add-app.png"><img src="https://gohugo.io/img/tutorials/wercker-add-app.png" alt="new-app" /></a></p>

<p><em>image courtesy of Hugo&rsquo;s offical docs</em></p>

<p>Follow the steps and configure you access without SSH key</p>

<p><a href="https://gohugo.io/img/tutorials/wercker-access.png"><img src="https://gohugo.io/img/tutorials/wercker-access.png" alt="blog-repo" /></a></p>

<p><em>image courtesy of Hugo&rsquo;s offical docs</em></p>

<p>This will give you a template <code>wercker.yml</code> file, which you can ignore for now. We&rsquo;ll be making our own later on.</p>

<p>Now that we have an app on Wercker, let&rsquo;s configure our build. Head over to github and grab an <a href="https://github.com/settings/tokens">access token</a>, the default setting will do fine. Copy the token somewhere like a blank text file.</p>

<p>Back on Wercker, navigate to your app and click the gear icon in the top</p>

<p><a href="/img/app-settings.png"><img src="/img/app-settings.png" alt="new-app" /></a></p>

<p>In the sidebar, click Targets and add a custom deploy method.</p>

<p><a href="/img/custom-deploy.png"><img src="/img/custom-deploy.png" alt="new-app" /></a></p>

<p>We&rsquo;ll just call this GithuPages for now, enable automatic builds, and set the target branch to build from to dev. Now in my case, dev is the name of the branch my site is developed on. It may be different for you so update the name to match what you used.</p>

<p><a href="/img/gh-pages.png"><img src="/img/gh-pages.png" alt="new-app" /></a></p>

<p>Click save and then add a new environment variable. This will be your github access token you just created.
We&rsquo;ll call it <code>GIT_TOKEN</code>, add the token, click save and we should be good.</p>

<p><a href="/img/token.png"><img src="/img/token.png" alt="new-app" /></a></p>

<h2 id="the-wercker-yml-file:7818264fcd3e1b87043e534129824e35">The <code>wercker.yml</code> file</h2>

<p>So back in our code base, let&rsquo;s create a <code>wercker.yml</code> file. This is how we&rsquo;ll configure out build on Wercker and build the hugo site.</p>

<pre><code class="language-yml">box: debian
build:
  steps:
    - arjen/hugo-build:
        version: &quot;0.15&quot;
        theme: hugo-minimalist-theme
        flags: --buildDrafts=true
deploy:
  steps:
    - install-packages:
        packages: git ssh-client
    - uetchy/gh-pages:
        token: $GIT_TOKEN
        repo: mhartington/mhartington.github.io
        path: public
        domain: mhartington.io
</code></pre>

            <ul class="share-buttons">
    <li></li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmhartington.io%2fpost%2fautomated-hugo-builds%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Automated%20Hugo%20Builds&amp;url=https%3a%2f%2fmhartington.io%2fpost%2fautomated-hugo-builds%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=https%3a%2f%2fmhartington.io%2fpost%2fautomated-hugo-builds%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title=""></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmhartington.io%2fpost%2fautomated-hugo-builds%2f&title=Automated%20Hugo%20Builds" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title=""></a>
    </li>
</ul>

            <a class="" href="https://mhartington.io/" title="">Back </a>
        </article>
        <div class="comments">
            <h3></h3>
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'mhartington';
    var disqus_identifier = 'https:\/\/mhartington.io\/post\/automated-hugo-builds\/';
    var disqus_title = 'Automated Hugo Builds';
    var disqus_url = 'https:\/\/mhartington.io\/post\/automated-hugo-builds\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </main>
    <aside class="author">
  <img class="profile-image" src="https://www.gravatar.com/avatar/be834f0968111acbbc6f3bf67041c8d5?s=128" alt="Mike Hartington" />
  <p class="name">
  <strong>Mike Hartington</strong></p>
  <p class="link"></p>
  <ul class="social">
    
<li><a href="//twitter.com/mhartington" class="icon-twitter" target="_blank" title="Twitter"></a></li>













<li><a href="//github.com/mhartington" class="icon-github" target="_blank" title="Github"></a></li>




<li><a href="https://mhartington.io/post/index.xml" class="icon-rss" target="_blank" title="RSS"></a></li>

  </ul>
  <br><br>
</aside>


</div>

<footer class="main-footer">
  <div class="container clearfix">
        <a class="icon-rss" href="https://mhartington.io/post/index.xml" title="RSS"></a>
        <p>&copy; 2017 &middot; Powered by <a href="https://gohugo.io">Hugo</a>.</p>
  </div>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>window.jQuery || document.write('<script src="https:\/\/mhartington.io\/js/vendor/jquery-1.11.0.min.js"><\/script>')</script>
<script src="https://mhartington.io/js/plugins.js"></script>

</body>
</html>

